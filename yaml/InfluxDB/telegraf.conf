[agent]
  interval = "60s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "60s"
  flush_jitter = "0s"
  precision = ""
  hostname = ""
  omit_hostname = true

[[outputs.influxdb_v2]]
  urls = ["http://influxdb.monitoring.svc.cluster.local:8086"]
  token = "$INFLUX_TOKEN"
  organization = "virtualelephant"
  bucket = "snmp"

# Cisco Leaf Switch 1A
[[inputs.snmp]]
  agents = [ "10.1.10.2:161" ]
  version = 3
  sec_name = "telegraf-snmp"
  auth_protocol = "MD5"
  auth_password = "$AUTH_PASS"
  priv_protocol = "DES"
  priv_password = "$PRIV_PASS"
  sec_level = "authPriv"
  name_prefix = "leaf1a_"
  [[inputs.snmp.field]]
    name = "hostname"
    oid = ".1.3.6.1.2.1.1.5.0"
  [[inputs.snmp.field]]
    name = "uptime"
    oid = ".1.3.6.1.2.1.1.3.0"
  [[inputs.snmp.field]]
    name = "cpu_1min"
    oid = ".1.3.6.1.4.1.9.2.1.56.0"
  [[inputs.snmp.field]]
    name = "mem_used"
    oid = ".1.3.6.1.4.1.9.9.48.1.1.1.5.1"
  [[inputs.snmp.field]]
    name = "mem_free"
    oid = ".1.3.6.1.4.1.9.9.48.1.1.1.6.1"
  [[inputs.snmp.table]]
    name = "interface"
    oid = ".1.3.6.1.2.1.2.2"
    inherit_tags = [ "hostname" ]

# Cisco Leaf Switch 1B
[[inputs.snmp]]
  agents = [ "10.1.10.3:161" ]
  version = 3
  sec_name = "telegraf-snmp"
  auth_protocol = "MD5"
  auth_password = "$AUTH_PASS"
  priv_protocol = "DES"
  priv_password = "$PRIV_PASS"
  sec_level = "authPriv"
  name_prefix = "leaf1b_"
  [[inputs.snmp.field]]
    name = "hostname"
    oid = ".1.3.6.1.2.1.1.5.0"
  [[inputs.snmp.field]]
    name = "uptime"
    oid = ".1.3.6.1.2.1.1.3.0"
  [[inputs.snmp.field]]
    name = "cpu_1min"
    oid = ".1.3.6.1.4.1.9.2.1.56.0"
  [[inputs.snmp.field]]
    name = "mem_used"
    oid = ".1.3.6.1.4.1.9.9.48.1.1.1.5.1"
  [[inputs.snmp.field]]
    name = "mem_free"
    oid = ".1.3.6.1.4.1.9.9.48.1.1.1.6.1"
  [[inputs.snmp.table]]
    name = "interface"
    oid = ".1.3.6.1.2.1.2.2"
    inherit_tags = [ "hostname" ]

# pfSense
[[inputs.snmp]]
  agents = [ "10.1.10.254:161" ]
  version = 3
  sec_name = "telegraf-snmp"
  auth_protocol = "MD5"
  auth_password = "$AUTH_PASS"
  priv_protocol = "DES"
  priv_password = "$PRIV_PASS"
  sec_level = "authPriv"
  name_prefix = "pfsense_"
  [[inputs.snmp.field]]
    name = "hostname"
    oid = ".1.3.6.1.2.1.1.5.0"
  [[inputs.snmp.field]]
    name = "uptime"
    oid = ".1.3.6.1.2.1.1.3.0"
  [[inputs.snmp.field]]
    name = "state_table"
    oid = ".1.3.6.1.4.1.12325.1.200.1.4.0"
  [[inputs.snmp.field]]
    name = "cpu_idle"
    oid = ".1.3.6.1.4.1.2021.11.11.0"
  [[inputs.snmp.field]]
    name = "mem_used"
    oid = ".1.3.6.1.4.1.2021.4.6.0"
  [[inputs.snmp.field]]
    name = "mem_free"
    oid = ".1.3.6.1.4.1.2021.4.11.0"
  [[inputs.snmp.table]]
    name = "interface"
    oid = ".1.3.6.1.2.1.2.2"
    inherit_tags = [ "hostname" ]

# Synology VLAN 11
[[inputs.snmp]]
  agents = [ "10.1.11.10:161" ]
  version = 3
  sec_name = "telegraf-snmp"
  auth_protocol = "MD5"
  auth_password = "$AUTH_PASS"
  priv_protocol = "DES"
  priv_password = "$PRIV_PASS"
  sec_level = "authPriv"
  name_prefix = "synology_iscsi1_"
  [[inputs.snmp.field]]
    name = "hostname"
    oid = ".1.3.6.1.2.1.1.5.0"
  [[inputs.snmp.field]]
    name = "uptime"
    oid = ".1.3.6.1.2.1.1.3.0"
  [[inputs.snmp.field]]
    name = "cpu_1min"
    oid = ".1.3.6.1.4.1.6574.1.2.1.0"
  [[inputs.snmp.field]]
    name = "mem_used"
    oid = ".1.3.6.1.4.1.2021.4.6.0"
  [[inputs.snmp.field]]
    name = "mem_free"
    oid = ".1.3.6.1.4.1.2021.4.11.0"
  [[inputs.snmp.field]]
    name = "volume_used"
    oid = ".1.3.6.1.4.1.6574.2.1.1.3.1"
  [[inputs.snmp.field]]
    name = "volume_free"
    oid = ".1.3.6.1.4.1.6574.2.1.1.4.1"
  [[inputs.snmp.field]]
    name = "disk1_status"
    oid = ".1.3.6.1.4.1.6574.2.1.1.5.1"
  [[inputs.snmp.table]]
    name = "interface"
    oid = ".1.3.6.1.2.1.2.2"
    inherit_tags = [ "hostname" ]

# Synology VLAN 12
[[inputs.snmp]]
  agents = [ "10.1.12.10:161" ]
  version = 3
  sec_name = "telegraf-snmp"
  auth_protocol = "MD5"
  auth_password = "$AUTH_PASS"
  priv_protocol = "DES"
  priv_password = "$PRIV_PASS"
  sec_level = "authPriv"
  name_prefix = "synology_iscsi2_"
  [[inputs.snmp.field]]
    name = "hostname"
    oid = ".1.3.6.1.2.1.1.5.0"
  [[inputs.snmp.field]]
    name = "uptime"
    oid = ".1.3.6.1.2.1.1.3.0"
  [[inputs.snmp.field]]
    name = "cpu_1min"
    oid = ".1.3.6.1.4.1.6574.1.2.1.0"
  [[inputs.snmp.field]]
    name = "mem_used"
    oid = ".1.3.6.1.4.1.2021.4.6.0"
  [[inputs.snmp.field]]
    name = "mem_free"
    oid = ".1.3.6.1.4.1.2021.4.11.0"
  [[inputs.snmp.field]]
    name = "volume_used"
    oid = ".1.3.6.1.4.1.6574.2.1.1.3.1"
  [[inputs.snmp.field]]
    name = "volume_free"
    oid = ".1.3.6.1.4.1.6574.2.1.1.4.1"
  [[inputs.snmp.field]]
    name = "disk1_status"
    oid = ".1.3.6.1.4.1.6574.2.1.1.5.1"
  [[inputs.snmp.table]]
    name = "interface"
    oid = ".1.3.6.1.2.1.2.2"
    inherit_tags = [ "hostname" ]
